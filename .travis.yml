dist: xenial
sudo: required
group: beta
language: node_js
node_js:
- 10
env:
  matrix:
  - SOLIDITY_COVERAGE=true
matrix:
  fast_finish: true
  allow_failures:
  - env: SOLIDITY_COVERAGE=true
script:
- set -e
- npm run lint
- npm test
before_deploy: npm run build
deploy:
  provider: npm
  email: devops@windingtree.com
  skip_cleanup: true
  api_key: "NPM_TOKEN"
  on:
    repo: windingtree/wt-contracts
    tags: true
    condition: $SOLIDITY_COVERAGE != true
notifications:
  slack: windingtree:mHY9adjLqGCf2nO0zzvQ8fuT